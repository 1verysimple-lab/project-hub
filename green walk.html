<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§­ Green Hell Coordinate Navigator & Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #228B22, #006400);
            color: #fff;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        h1, h2 { text-shadow: 2px 2px 4px rgba(0,0,0,0.7); }
        h1 { font-size: 2.5em; text-align: center; }
        .container { max-width: 1400px; margin: 0 auto; }
        .section { background: rgba(0,0,0,0.4); border-radius: 15px; padding: 20px; margin: 20px 0; backdrop-filter: blur(10px); }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid rgba(255,255,255,0.3); padding: 10px; text-align: left; }
        th { background: rgba(0,100,0,0.6); }
        input, select, button { padding: 10px; margin: 5px; border: none; border-radius: 5px; font-size: 16px; }
        button { background: #FF4500; color: white; cursor: pointer; transition: background 0.3s; }
        button:hover { background: #FF6347; }
        .map-container { position: relative; display: inline-block; border: 3px solid rgba(255,255,255,0.5); border-radius: 10px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        #mapimg { display: block; width: 100%; height: auto; }
        #overlay { position: absolute; top: 0; left: 0; pointer-events: none; }
        #info { background: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; font-size: 1.2em; font-weight: bold; margin: 10px 0; }
        .poi-list { max-height: 200px; overflow-y: auto; }
        @media (max-width: 1300px) { .map-container { width: 100%; } #overlay { width: 100%; height: auto; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§­ Green Hell Coordinate Navigator</h1>
        
        <div class="section" id="guide">
            <h2>ğŸ“– Quick Guide: Using Compass & Map</h2>
            <p><strong>Activate Watch:</strong> Hold <kbd>F</kbd> â†’ Scroll wheel to GPS mode (needle points North).</p>
            <p><strong>Coords:</strong> Top = <strong>Longitude Â°W</strong> (38Â°W: East-West, higher # = West/Left on map).<br>
            Bottom = <strong>Latitude Â°S</strong> (21Â°S: North-South, higher # = South/Bottom).</p>
            <p><strong>Map (Press M):</strong> North-up. No player dotâ€”plot coords manually!</p>
            <ul>
                <li><strong>Find position:</strong> Top edge: Trace vertical line from your Â°W (left=56W high, right=23W low).<br>
                Left edge: Trace horizontal from Â°S (top=14S low, bottom=40S high). Intersection = YOU.</li>
                <li><strong>Navigate:</strong> Plot target â†’ Face North (watch needle) â†’ Turn to bearing (tool below calculates).<br>Watch coords change as you move.</li>
            </ul>
            <table>
                <tr><th>Map Edge</th><th>Labels</th><th>Increases â†’</th><th>Example: 38Â°W 21Â°S</th></tr>
                <tr><td>Top (Lon)</td><td>XXÂ°W</td><td>Right (lower Â°W = East)</td><td>Vertical line ~1/3 from left</td></tr>
                <tr><td>Left (Lat)</td><td>YYÂ°S</td><td>Down (higher Â°S = South)</td><td>Horizontal ~2/3 down</td></tr>
            </table>
            <p><strong>Tips:</strong> Note base coords! Use rivers/lakes as landmarks. Find maps in villages/planes.</p>
        </div>

        <div class="section" id="tool">
            <h2>ğŸ—ºï¸ Interactive Tool</h2>
            <div>
                <label>Current: </label>
                <input id="currW" type="number" min="23" max="56" value="38" step="1" title="Longitude West"> Â°W
                <input id="currS" type="number" min="14" max="40" value="21" step="1" title="Latitude South"> Â°S
            </div>
            <div>
                <label>Target: </label>
                <select id="poiSelect" class="poi-list" onchange="setTargetFromPOI()">
                    <option value="">--- Popular POIs (click to set) ---</option>
                    <option data-w="44" data-s="17">ğŸš™ Overturned Jeep</option>
                    <option data-w="46" data-s="26">ğŸ˜ï¸ Abandoned Tribal Village</option>
                    <option data-w="37" data-s="19">ğŸ˜ï¸ East Tribal Village</option>
                    <option data-w="47" data-s="17">ğŸ˜ï¸ West Tribal Village</option>
                    <option data-w="51" data-s="19">ğŸ£ River Shack / Fishing Dock</option>
                    <option data-w="50" data-s="27">ğŸ’Š Cocaine / Drug Camp</option>
                    <option data-w="52" data-s="17">â›°ï¸ Mountain Campsite</option>
                    <option data-w="46" data-s="31">ğŸŒ¸ Lily Pond</option>
                    <option data-w="40" data-s="24">âœˆï¸ Plane Crash Cave</option>
                    <option data-w="37" data-s="20">ğŸŒ‰ Bamboo Bridge</option>
                    <option data-w="35" data-s="26">ğŸ Anaconda Camp</option>
                    <option data-w="40" data-s="18">ğŸ›— Elevator</option>
                    <option data-w="37" data-s="24">ğŸ’§ Underground Waterfall</option>
                    <option data-w="33" data-s="23">â›ï¸ Iron Cave</option>
                </select>
                <span>or Manual: </span>
                <input id="targW" type="number" min="23" max="56" step="1"> Â°W
                <input id="targS" type="number" min="14" max="40" step="1"> Â°S
            </div>
            <button onclick="updateMap()">ğŸ”„ Update Map & Bearing</button>
            <button onclick="swapCoords()">ğŸ”„ Swap Current/Target</button>
            <div id="info">
                <strong>Bearing: <span id="bearing">--</span>Â° (<span id="dir">--</span>)</strong><br>
                <strong>Distance: <span id="dist">--</span></strong>
            </div>
            <div class="map-container" style="width:1200px; max-width:100%;">
                <img id="mapimg" src="https://static.wikia.nocookie.net/greenhell/images/2/2d/GreenHellMap.jpg/revision/latest?cb=20180908203304" alt="Green Hell Map" onload="resizeCanvas()">
                <canvas id="overlay"></canvas>
            </div>
            <p><em>Red: You | Blue: Target | Yellow line: Path | Grid: Every 2Â° | Hover map for coords (dev tool)</em></p>
        </div>

        <div class="section">
            <h2>ğŸŒ More Resources</h2>
            <ul>
                <li><a href="https://greenhell.fandom.com/wiki/Map" style="color:#FFD700;">Official Wiki Map Guide</a></li>
                <li><a href="https://wand.com/en/maps/green-hell" style="color:#FFD700;">Wand Interactive Map</a></li>
                <li><a href="https://github.com/Daschi1/green-hell-maps" style="color:#FFD700;">GitHub Interactive Maps</a></li>
                <li><a href="https://greenhell.fandom.com/wiki/Map:Greenhell" style="color:#FFD700;">Fandom Interactive</a></li>
            </ul>
        </div>
    </div>

    <script>
        const lonMin = 23, lonMax = 56;
        const latMin = 14, latMax = 40;
        let mapWidth = 1200, mapHeight = 763;

        const directions = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];

        function pxLon(lon) {
            return ((lonMax - lon) / (lonMax - lonMin)) * mapWidth;
        }

        function pxLat(lat) {
            return ((lat - latMin) / (latMax - latMin)) * mapHeight;
        }

        function resizeCanvas() {
            const img = document.getElementById('mapimg');
            const canvas = document.getElementById('overlay');
            mapWidth = img.naturalWidth;
            mapHeight = img.naturalHeight;
            canvas.width = mapWidth;
            canvas.height = mapHeight;
            canvas.style.width = mapWidth + 'px';
            canvas.style.height = mapHeight + 'px';
            updateMap();
        }

        function setTargetFromPOI() {
            const select = document.getElementById('poiSelect');
            const option = select.options[select.selectedIndex];
            if (option.dataset.w) {
                document.getElementById('targW').value = option.dataset.w;
                document.getElementById('targS').value = option.dataset.s;
            }
            updateMap();
        }

        function swapCoords() {
            const cw = document.getElementById('currW').value;
            const cs = document.getElementById('currS').value;
            const tw = document.getElementById('targW').value;
            const ts = document.getElementById('targS').value;
            document.getElementById('currW').value = tw;
            document.getElementById('currS').value = ts;
            document.getElementById('targW').value = cw;
            document.getElementById('targS').value = cs;
            updateMap();
        }

        function updateMap() {
            const currW = parseFloat(document.getElementById('currW').value) || lonMax;
            const currS = parseFloat(document.getElementById('currS').value) || latMax;
            const targW = parseFloat(document.getElementById('targW').value) || currW;
            const targS = parseFloat(document.getElementById('targS').value) || currS;

            const canvas = document.getElementById('overlay');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, mapWidth, mapHeight);

            // Grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.4)';
            ctx.lineWidth = 1;
            for (let lon = lonMin; lon <= lonMax; lon += 2) {
                const x = pxLon(lon);
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, mapHeight);
                ctx.stroke();
                ctx.fillStyle = 'rgba(255,255,255,0.8)';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(lon + 'Â°W', x, 20);
            }
            for (let lat = latMin; lat <= latMax; lat += 2) {
                const y = pxLat(lat);
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(mapWidth, y);
                ctx.stroke();
                ctx.textAlign = 'left';
                ctx.fillText(lat + 'Â°S', 10, y + 5);
            }

            // Current marker (Red)
            const cx = pxLon(currW), cy = pxLat(currS);
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(cx, cy, 10, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('YOU', cx, cy - 15);

            // Target marker (Blue)
            const tx = pxLon(targW), ty = pxLat(targS);
            ctx.fillStyle = 'lime';
            ctx.beginPath();
            ctx.arc(tx, ty, 10, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = 'darkgreen';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = 'black';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('TARGET', tx, ty - 15);

            // Path line
            ctx.strokeStyle = 'yellow';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(tx, ty);
            ctx.stroke();

            // Bearing calc
            const deltaEast = currW - targW;
            const deltaNorth = currS - targS;
            let bearing = (Math.atan2(deltaEast, deltaNorth) * 180 / Math.PI + 360) % 360;
            document.getElementById('bearing').textContent = bearing.toFixed(0);
            const dirIdx = Math.round(bearing / 22.5) % 16;
            document.getElementById('dir').textContent = directions[dirIdx];

            // Distance (arbitrary game units: ~10 units = 1 min walk)
            const distDeg = Math.sqrt(deltaEast * deltaEast + deltaNorth * deltaNorth);
            const distUnits = (distDeg * 10).toFixed(0);
            const estTime = Math.round(distDeg * 5);
            document.getElementById('dist').textContent = distUnits + ' units (~' + estTime + ' min walk)';

            // Arrow at current pointing bearing
            const arrowLen = 30;
            const rad = (bearing - 90) * Math.PI / 180; // Adjust for canvas Y-down
            const ax = cx + Math.cos(rad) * arrowLen;
            const ay = cy + Math.sin(rad) * arrowLen;
            ctx.strokeStyle = 'orange';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(ax, ay);
            ctx.stroke();
            ctx.fillStyle = 'orange';
            ctx.beginPath();
            ctx.arc(ax, ay, 5, 0, Math.PI * 2);
            ctx.fill();
        }

        // Init
        window.onload = () => {
            updateMap();
            document.getElementById('mapimg').onload = resizeCanvas;
        };
    </script>
</body>
</html>